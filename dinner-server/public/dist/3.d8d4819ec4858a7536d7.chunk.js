webpackJsonp([3],{480:function(e,t,r){var o=r(169)(r(484),r(490),null,null);o.options.__file="/Users/taiguangyin/gytai/github/Dinner/dinner-vue/src/views/login.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] login.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},484:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{modal:!1,formInline:{user:"",password:""},formLeft:{account:"",name:"",password:""},ruleInline:{user:[{required:!0,message:"请填写用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6位",trigger:"blur"}]},ruleLeft:{account:[{required:!0,message:"请填写用户名",trigger:"blur"}],name:[{required:!0,message:"请填写姓名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不能小于6位",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.baseServerUrl+"/users/login",o={withCredentials:!0,account:t.formInline.user,password:t.formInline.password},s=t;t.$ajax.post(r,o).then(function(e){200==e.data.code?(s.$Message.success("登录成功!"),localStorage.setItem("uid",e.data.data.uid),localStorage.setItem("name",e.data.data.name),s.$router.push("/index/order")):s.$Message.error(e.data.msg)}).catch(function(e){s.$Message.error("登录异常!")})}else t.$Message.error("表单验证失败!")})},register:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=t.baseServerUrl+"/users/register",o={name:t.formLeft.name,account:t.formLeft.account,password:t.formLeft.password},s=t;t.$ajax.post(r,o).then(function(e){200==e.data.code?(s.$Message.success("注册成功!"),setTimeout(function(){s.modal=!1},1e3)):s.$Message.error(e.data.msg)}).catch(function(e){s.$Message.error("注册异常!")})}else t.$Message.error("表单验证失败!")})}}}},490:function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",{staticStyle:{width:"350px",margin:"0 auto","margin-top":"150px"}},[r("p",{staticStyle:{"text-align":"center"},slot:"title"},[e._v("\n       登录\n    ")]),e._v(" "),r("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[r("Form-item",{attrs:{prop:"user"}},[r("Input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.formInline.user,callback:function(t){e.formInline.user=t},expression:"formInline.user"}},[r("Icon",{attrs:{type:"ios-person-outline"},slot:"prepend"})],1)],1),e._v(" "),r("Form-item",{attrs:{prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formInline.password,callback:function(t){e.formInline.password=t},expression:"formInline.password"}},[r("Icon",{attrs:{type:"ios-locked-outline"},slot:"prepend"})],1)],1),e._v(" "),r("Form-item",{staticStyle:{"text-align":"center"}},[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formInline")}}},[e._v("登录")]),e._v(" "),r("Button",{attrs:{type:"primary"},on:{click:function(t){e.modal=!0}}},[e._v("注册")])],1)],1),e._v(" "),r("Modal",{attrs:{width:"360"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[r("p",{staticStyle:{color:"#f60","text-align":"center"},slot:"header"},[r("Icon",{attrs:{type:"information-circled"}}),e._v(" "),r("span",[e._v("用户注册")])],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("Form",{ref:"formLeft",attrs:{model:e.formLeft,"label-position":"left","label-width":100,rules:e.ruleLeft}},[r("Form-item",{attrs:{label:"账户",prop:"account"}},[r("Input",{attrs:{placeholder:"账户"},model:{value:e.formLeft.account,callback:function(t){e.formLeft.account=t},expression:"formLeft.account"}})],1),e._v(" "),r("Form-item",{attrs:{label:"密码",prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formLeft.password,callback:function(t){e.formLeft.password=t},expression:"formLeft.password"}})],1),e._v(" "),r("Form-item",{attrs:{label:"姓名",prop:"name"}},[r("Input",{attrs:{placeholder:"姓名"},model:{value:e.formLeft.name,callback:function(t){e.formLeft.name=t},expression:"formLeft.name"}})],1)],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"},slot:"footer"},[r("Button",{attrs:{type:"success",size:"large"},on:{click:function(t){e.register("formLeft")}}},[e._v("注册")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});