webpackJsonp([0],{481:function(e,t,a){a(488);var r=a(169)(a(485),a(492),"data-v-bc1d7a82",null);r.options.__file="/Users/taiguangyin/gytai/github/Dinner/dinner-vue/src/views/nav1/order.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] order.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},485:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){var e=this;return{columns:[{title:"姓名",key:"name"},{title:"订餐时间",key:"time"},{title:"操作",key:"action",render:function(t,a){return t("div",[t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.cancel(a.index)}}},"取消预定")])}}],data:this.getTodayOrder(),nav_name:"预定晚餐",type:1,num:0}},methods:{order:function(){var e=this,t=this.baseServerUrl+"/order";this.$ajax.post(t,{uid:localStorage.getItem("uid")}).then(function(t){if(200==t.data.code){var a={uid:localStorage.getItem("uid"),name:localStorage.getItem("name"),time:e.Util.dateFormat(new Date)};e.data.push(a),e.num+=1,e.$Message.success("预定成功!")}else e.$Message.error(t.data.msg)}).catch(function(t){e.$Message.error("登录异常!")})},cancel:function(e){var t=this,a=this;this.$Modal.confirm({title:"取消订餐",content:"<p>是否确认取消订餐？</p>",onOk:function(){if(localStorage.getItem("uid")==t.data[e].uid){var r=t.baseServerUrl+"/cancel";a.$ajax.post(r,{uid:localStorage.getItem("uid")}).then(function(t){200==t.data.code?(a.data.splice(e,1),a.num-=1,a.$Message.success("取消成功!")):a.$Message.error(t.data.msg)}).catch(function(e){a.$Message.error("登录异常!")})}else a.$Message.error("不能取消别人的订餐!")}})},getTodayOrder:function(){var e=this,t=this.baseServerUrl+"/get",a={type:this.type};this.$ajax.get(t,a).then(function(t){t.data.data.map(function(t){t.time=e.Util.dateFormat(new Date(t.time))}),e.data=t.data.data,e.num=t.data.data.length}).catch(function(t){e.data=[]})}}}},488:function(e,t){},492:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"layout-breadcrumb"},[a("Breadcrumb",[a("Breadcrumb-item",{attrs:{href:"#"}},[e._v("订餐管理")]),e._v(" "),a("Breadcrumb-item",[e._v("预定晚餐")])],1)],1),e._v(" "),a("div"),e._v(" "),a("Button",{staticClass:"orderBtn",attrs:{type:"primary"},on:{click:function(t){e.order()}}},[e._v("预定晚餐")]),e._v(" "),a("Table",{staticClass:"order_table",attrs:{columns:e.columns,data:e.data}}),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[e._v("今日订餐人数："+e._s(e.num)+" 人")])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});